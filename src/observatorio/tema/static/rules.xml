<?xml version="1.0" encoding="UTF-8"?>
<rules xmlns="http://namespaces.plone.org/diazo"
       xmlns:css="http://namespaces.plone.org/diazo/css"
       xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

  <theme href="index.html" css:if-content="#visual-portal-wrapper" />

  <!-- Head -->
  <copy attributes="lang dir" css:content="html" css:theme="html" />
  <!-- Considerar substituir linhas comentadas pelas 2 seguintes -->
  <!--drop css:theme="meta, title" /-->
  <!--replace css:content-children="head" css:theme-children="head" /-->
  <before css:content="head base, head meta, head link, head style, head script" css:theme-children="head" />
  <replace css:content="head title" css:theme="head title" />
  <copy attributes="*" css:content="body" css:theme="body" />

  <!-- Top -->
  <replace css:content="#barra-brasil" css:theme="#barra-brasil" />
  <replace css:content=".left" css:theme=".left" />
  <copy attributes="action" css:content="#portal-searchbox form" css:theme="#global-nav-search" />
  <copy attributes="href title" css:content="#portal-logo" css:theme="#logo" />
  <replace css:theme-children="#ultimas-noticias div[data-orbit]">
    <xsl:for-each select="//ul[@id='js-news']/li/*"><h6><xsl:copy-of select="." /></h6></xsl:for-each>
  </replace>
  <drop css:content="#ticker-wrapper" />

  <!-- Column Content -->
  <copy css:content-children="#portal-column-content" css:theme="#column-content" />
  <replace css:content-children="#portal-column-one" css:theme="#portal-column-one" />
  <drop css:theme="#portal-column-two" />

  <!-- Footer -->
  <replace css:content="#portal-footer-wrapper footer" theme="/html/body/footer" />

  <!-- Without portlets -->
  <rules css:if-content="#portal-column-content.cell.width-full.position-0">
    <drop css:theme="#column-one, #portal-column-two" />
    <replace css:theme="#column-content">
      <div id="column-content" class="large-12 columns">
        <xsl:apply-templates select="//div[@id='portal-column-content']/*" />
      </div>
    </replace>
  </rules>

  <!-- Manage portlets -->
  <rules if-path="@@manage-portlets/">
    <drop css:theme="#logo, #apresentacao" />
    <replace css:content-children="#portal-column-two" css:theme-children="#portal-column-two"  />
    <replace css:theme="#column-content">
      <div id="column-content" class="large-6 columns">
        <xsl:apply-templates select="//div[@id='portal-column-content']/*" />
      </div>
    </replace>
  </rules>

  <!-- Banners -->
  <replace css:content="#banners" css:theme="#banners" />

  <!-- Breadcrumbs -->
  <rules css:if-content="#breadcrumbs-1">
    <replace css:content="#portal-breadcrumbs" method="raw">
      <div id="#portal-breadcrumbs">
        <ul class="breadcrumbs">
          <xsl:for-each select="..//div[@id='portal-breadcrumbs']/span/*">
            <xsl:if css:test=":not(.breadcrumbSeparator)">
              <li>
                <xsl:copy-of select="."/>
              </li>
            </xsl:if>
          </xsl:for-each>
        </ul>
      </div>
    </replace>
  </rules>

  <!-- Forms -->
  <replace css:content=".visualClear">
    <div class="clearfix">
      <xsl:apply-templates select="./text()" />
    </div>
  </replace>
  <replace css:content=".documentDescription">
    <h5 class="subheader">
      <xsl:apply-templates select="./text()|./*"/>
    </h5>
  </replace>

</rules>